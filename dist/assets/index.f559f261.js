var _=Object.defineProperty,L=Object.defineProperties;var k=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var O=(r,e,l)=>e in r?_(r,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[e]=l,u=(r,e)=>{for(var l in e||(e={}))F.call(e,l)&&O(r,l,e[l]);if(R)for(var l of R(e))G.call(e,l)&&O(r,l,e[l]);return r},y=(r,e)=>L(r,k(e));import{j as I,B as b,A as w,r as M,R as D,a as $}from"./vendor.6d016678.js";const j=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&n(p)}).observe(document,{childList:!0,subtree:!0});function l(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerpolicy&&(c.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?c.credentials="include":s.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(s){if(s.ep)return;s.ep=!0;const c=l(s);fetch(s.href,c)}};j();var U="/tic-tac-toe/assets/boy.e863cab3.png",P="/tic-tac-toe/assets/cat.4048cbe0.png",V="/tic-tac-toe/assets/chicken.2280f52e.png",H="/tic-tac-toe/assets/girl.97f6c2f6.png",z="/tic-tac-toe/assets/pig.dfde8cd9.png",W="/tic-tac-toe/assets/santa.298af653.png",q="/tic-tac-toe/assets/skeleton.1773fc6d.png",K="/tic-tac-toe/assets/dog.01cfd44a.png",J="/tic-tac-toe/assets/glasses.a9fb716c.png";const t={CONFIRM_ROLE1:"role1",CONFIRM_ROLE2:"role2",GAME_START:"gameStart",MOVE:"move",GAME_RESULT:"gameResult",GAME_RESTART:"gameRestart",GAME_CONTINUE:"gameContinue"},Q=(r,e)=>{var l;switch(e.type){case t.CONFIRM_ROLE1:return y(u({},r),{player1:y(u({},r.player1),{src:e.payload.col==="src"?e.payload.src:r.player1.src,name:e.payload.col==="name"?e.payload.name:r.player1.name})});case t.CONFIRM_ROLE2:return y(u({},r),{player2:y(u({},r.player2),{src:e.payload.col==="src"?e.payload.src:r.player2.src,name:e.payload.col==="name"?e.payload.name:r.player2.name})});case t.GAME_START:return y(u({},r),{start:!0});case t.MOVE:return y(u({},r),{board:e.payload.board,playing:r.playing==="player1"?"player2":"player1"});case t.GAME_RESULT:return e.payload.result!=="draw"?y(u({},r),{result:e.payload.result,[e.payload.result]:y(u({},r[e.payload.result]),{score:((l=r[e.payload.result])==null?void 0:l.score)+1})}):y(u({},r),{result:e.payload.result});case t.GAME_RESTART:return{player1:{src:"",name:"",score:0,title:"player1"},player2:{src:"",name:"",score:0,title:"player2"},playing:"player1",result:null,board:["","","","","","","","",""],start:!1};case t.GAME_CONTINUE:return y(u({},r),{playing:"player1",result:null,board:["","","","","","","","",""]});default:throw new Error(`${e.type} method is not exist`)}},a=I.exports.jsx,o=I.exports.jsxs,X=({gameDispatch:r,gameState:e})=>{var p,m,N,h,f,C,A,E,g,B;const l=[U,P,V,K,H,J,z,W,q],n=(i,d,v)=>{v==="add"?d==="player1"?r({type:t.CONFIRM_ROLE1,payload:{col:"src",src:i.target.src}}):d==="player2"&&r({type:t.CONFIRM_ROLE2,payload:{col:"src",src:i.target.src}}):v==="remove"&&(d==="player1"?r({type:t.CONFIRM_ROLE1,payload:{col:"src",src:""}}):d==="player2"&&r({type:t.CONFIRM_ROLE2,payload:{col:"src",src:""}}))},s=(i,d)=>{d==="player1"?r({type:t.CONFIRM_ROLE1,payload:{col:"name",name:i.target.value}}):d==="player2"&&r({type:t.CONFIRM_ROLE2,payload:{col:"name",name:i.target.value}})},c=()=>{r({type:t.GAME_START})};return o("div",{className:"pop",children:[a("div",{className:"chooseContainer",children:((p=e.player1)==null?void 0:p.src)?o("div",{className:"playerConfirmContainer",children:[a("div",{className:"imageBigContainer",children:a("img",{className:"playerImg",src:(m=e.player1)==null?void 0:m.src,alt:"player1"})}),a("input",{className:"inputName",name:"name",type:"text",placeholder:"\u8ACB\u8F38\u5165\u73A9\u5BB61\u540D\u7A31",value:(N=e.player1)==null?void 0:N.name,onChange:i=>s(i,"player1")}),a("button",{className:"chooseAgainBtn blue",onClick:i=>{n(i,"player1","remove")},children:"\u91CD\u65B0\u9078\u64C7"})]}):l.map((i,d)=>a("div",{className:"playerContainer blueHover",children:a("img",{className:"player",src:i,alt:`player${d}`,onClick:v=>{n(v,"player1","add")}},d)},d))}),o("div",{className:"textContainer",children:[a("span",{className:"title",children:!((h=e.player1)==null?void 0:h.src)||!((f=e.player2)==null?void 0:f.src)?"\u8ACB\u9078\u64C7\u89D2\u8272":""}),((C=e.player1)==null?void 0:C.src)&&((A=e.player2)==null?void 0:A.src)&&a("button",{className:"startBtn",onClick:i=>{i.preventDefault(),c()},children:"\u958B\u59CB\u904A\u6232"})]}),a("div",{className:"chooseContainer",children:((E=e.player2)==null?void 0:E.src)?o("div",{className:"playerConfirmContainer",children:[a("div",{className:"imageBigContainer",children:a("img",{className:"playerImg",src:(g=e.player2)==null?void 0:g.src,alt:"player2"})}),a("input",{className:"inputName",name:"player2",type:"text",placeholder:"\u8ACB\u8F38\u5165\u73A9\u5BB62\u540D\u7A31",value:(B=e.player2)==null?void 0:B.name,onChange:i=>s(i,"player2")}),a("button",{className:"chooseAgainBtn green",onClick:i=>{n(i,"player2","remove")},children:"\u91CD\u65B0\u9078\u64C7"})]}):l.map((i,d)=>a("div",{className:"playerContainer greenHover",children:a("img",{className:"player",src:i,alt:`player${d}`,onClick:v=>{n(v,"player2","add")}})},d))})]})},Y=({gameState:r})=>{var e,l,n,s,c,p,m,N;return o("div",{className:"header",children:[o("div",{className:"left",children:[((e=r.player1)==null?void 0:e.src)&&a("img",{className:"smallImg",src:(l=r.player1)==null?void 0:l.src,alt:"player1"}),a("span",{className:"playerName",children:((n=r.player1)==null?void 0:n.name)?(s=r.player1)==null?void 0:s.name:"\u73A9\u5BB61"})]}),o("div",{className:"middle",children:[a("span",{className:"middleText",children:r.player1.score}),a("span",{className:"middleText",children:"V.S"}),a("span",{className:"middleText",children:r.player2.score})]}),o("div",{className:"right",children:[a("span",{className:"playerName",children:((c=r.player2)==null?void 0:c.name)?(p=r.player2)==null?void 0:p.name:"\u73A9\u5BB62"}),((m=r.player2)==null?void 0:m.src)&&a("img",{className:"smallImg",src:(N=r.player2)==null?void 0:N.src,alt:"player2"})]})]})},Z=({block:r,index:e,gameDispatch:l,gameState:n})=>a("div",{className:"block",style:{cursor:r?"":"pointer"},onClick:()=>{r||l({type:t.MOVE,payload:{board:n.board.map((c,p)=>e===p&&!c?n.playing:c)}})},children:r&&(r==="player1"?a(b,{}):a(w,{}))}),S=({gameDispatch:r,gameState:e})=>{const l=e.board;return M.exports.useEffect(()=>{const n=()=>{const s=[[0,1,2],[3,4,5],[6,7,8],[0,4,8],[2,4,6],[0,3,6],[1,4,7],[2,5,8]];let c=!0;for(let p=0;p<s.length;p++){const[m,N,h]=s[p];if(l[m]&&l[m]===l[N]&&l[N]===l[h])return l[m];(!l[m]||!l[N]||!l[h])&&(c=!1)}return c?"draw":null};r({type:t.GAME_RESULT,payload:{result:n()}})},[l]),a("div",{className:"board",children:e.board.map((n,s)=>a(Z,{block:n,index:s,gameDispatch:r,gameState:e},s))})},x=({player:r,Icon:e,color:l,playing:n})=>o("div",{className:"sideContainer",children:[a("div",{className:"playerIconContainer",children:a(e,{style:{color:l}})}),a("img",{className:"sideImage",src:r.src,alt:"\u73A9\u5BB6\u5716\u793A"}),r.title==="player1"&&a("div",{className:`turn ${n==="player1"&&"blue"}`,children:n==="player1"&&`${r.name||"\u73A9\u5BB61"}\u56DE\u5408`}),r.title==="player2"&&a("div",{className:`turn ${n==="player2"&&"green"}`,children:n==="player2"&&`${r.name||"\u73A9\u5BB62"}\u56DE\u5408`})]});const T=({n:r,size:e})=>o("div",{className:`firework location${r}`,style:{transform:`scale(${e})`},children:[a("div",{className:"explosion"}),a("div",{className:"explosion"}),a("div",{className:"explosion"}),a("div",{className:"explosion"}),a("div",{className:"explosion"}),a("div",{className:"explosion"}),a("div",{className:"explosion"}),a("div",{className:"explosion"}),a("div",{className:"explosion"}),a("div",{className:"explosion"}),a("div",{className:"explosion"}),a("div",{className:"explosion"})]}),ee=({gameDispatch:r,gameState:e})=>{const l=s=>{s.preventDefault(),r({type:t.GAME_RESTART})},n=s=>{s.preventDefault(),r({type:t.GAME_CONTINUE})};return o("div",{className:"gameEndContainer",children:[e.result!=="draw"&&a(T,{n:"1",size:"1.5"}),e.result!=="draw"&&a(T,{n:"2",size:"2"}),o("div",{className:"resultContainer",children:[e.result&&e.result!=="draw"&&a("span",{className:"resultTitle",children:"Winner"}),e.result==="player1"&&o("div",{className:"winner",children:[a("img",{src:e.player1.src,alt:"winner",className:"winnerImg"}),a("span",{className:"winnerName",children:e.player1.name?e.player1.name:"\u73A9\u5BB61"})]}),e.result==="player2"&&o("div",{className:"winner",children:[a("img",{src:e.player2.src,alt:"winner",className:"winnerImg"}),a("span",{className:"winnerName",children:e.player2.name?e.player2.name:"\u73A9\u5BB62"})]}),e.result==="draw"&&o("div",{className:"drawContainer",children:[a("span",{className:"drawText",children:"\u672C\u5C40\u4E0D\u5206\u52DD\u8CA0"}),o("div",{className:"drawImgContainer",children:[a("img",{className:"drawImg",src:e.player1.src,alt:"\u73A9\u5BB61"}),a("img",{className:"drawImg",src:e.player2.src,alt:"\u73A9\u5BB62"})]})]}),o("div",{className:"resultBtnContainer",children:[a("button",{className:"resultBtn",onClick:l,children:"\u91CD\u9078\u89D2\u8272"}),a("button",{className:"resultBtn",onClick:n,children:"\u518D\u4F86\u4E00\u5C40"})]})]})]})};const re=()=>{const r={player1:{src:"",name:"",score:0,title:"player1"},player2:{src:"",name:"",score:0,title:"player2"},playing:"player1",result:null,board:["","","","","","","","",""],start:!1},[e,l]=M.exports.useReducer(Q,r);return o("div",{className:"app",children:[a(Y,{gameState:e}),e.start?e.result?a(ee,{gameDispatch:l,gameState:e}):o("div",{className:"game",children:[a(x,{player:e.player1,playing:e.playing,Icon:b,color:"rgb(41, 147, 235)"}),a(S,{gameDispatch:l,gameState:e}),a(x,{player:e.player2,playing:e.playing,Icon:w,color:"rgb(31, 216, 170)"})]}):a(X,{gameDispatch:l,gameState:e})]})};D.render(a($.StrictMode,{children:a(re,{})}),document.getElementById("root"));
